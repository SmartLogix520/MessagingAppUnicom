;/*FB_PKG_DELIM*/

__d("MWV2ChatOverflowHead.react",["fbt","ix","CometContextualLayer.react","CometListCellGlimmer.react","CometMenuItemBase.react","CometTextWithEntities.react","GroupsCometChatsEngagementLogger","I64","LSIntEnum","LSThreadAttributionStore","LSThreadTitle.react","MDSGlimmer.react","MWCMIsAnyCMThread","MWChatHeadPicture.react","MWChatInteraction","MWChatStateActions","MWChatStateV2.react","MWChatStateV2Types","MWChatTextTransform","MWPActor.react","MWV2ChatHeadButton.react","MWXIcon.react","MWXMenu.react","MWXText.react","ReQL","ReQLSuspense","fbicon","getLSMediaContactProfilePictureUrl","react","recoverableViolation","stylex","useMWChatOpenTabTraceProvider","useMWFacepileGetContactsToShow","useMWV2EnsureThatChatTabExists","useReStore"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j,k,l,m,n,o=n||(n=d("react"));b=n;var p=b.useRef,q=b.useState;function r(a){var b,e=d("MWPActor.react").useActor(),g=(j||(j=c("useReStore")))();return(b=d("ReQLSuspense").useFirst(function(){return d("ReQL").fromTableAscending(g.table("threads")).getKeyRange(a).map(function(b){return d("ReQLSuspense").toArray(d("ReQL").fromTableDescending(g.table("messages")).getKeyRange(a).take(20).bounds({gt:d("ReQL").key(b.lastReadWatermarkTimestampMs)}).filter(function(a){return!(m||(m=d("I64"))).equal(a.senderId,e)}),f.id+":74").length})},[g,e,a],f.id+":68"))!=null?b:0}function s(a){a=a.thread;var b=r(a.threadKey);return o.jsxs(o.Fragment,{children:[o.jsx(c("LSThreadTitle.react"),{thread:a}),o.jsx(c("CometTextWithEntities.react"),{text:h._("__JHASH__-HzxiMQUhNs__JHASH__",[h._param("unread message count",String(b))]).toString(),transforms:d("MWChatTextTransform").epdTextTransforms})]})}s.displayName=s.name+" [from "+f.id+"]";var t={auxVisible:{visibility:"xnpuxes",$$css:!0},auxWrapper:{display:"x78zum5",visibility:"xlshs6z",$$css:!0}};function u(a){var b=a.closeTab,e=a.isItemHovered,f=a.setItemIsHovered;a.tab;return o.jsx("div",{className:(k||(k=c("stylex")))(t.auxWrapper,e?t.auxVisible:!1),children:o.jsx(c("MWXIcon.react"),{"aria-label":h._("__JHASH__LLeka0bmVM0__JHASH__"),color:"secondary",icon:d("fbicon")._(i("478231"),12),onHoverIn:function(){return f(!0)},onHoverOut:function(){return f(!1)},onPress:b})})}u.displayName=u.name+" [from "+f.id+"]";function v(a){var b=a.descriptor,e=a.setParentHoverState,g=a.tab,h=(j||(j=c("useReStore")))(),i=d("ReQLSuspense").useFirst(function(){return d("ReQL").fromTableAscending(h.table("threads")).getKeyRange(b.threadKey)},[h,b.threadKey],f.id+":153"),k=d("MWChatStateV2.react").useDispatch(),n=c("useMWChatOpenTabTraceProvider")();c("useMWV2EnsureThatChatTabExists")(b.threadKey,b.threadType,b.clientThreadKey);a=q(!1);var p=a[0],r=a[1];if(i!=null){var t=c("MWCMIsAnyCMThread")(i.threadType);return o.jsx(c("CometMenuItemBase.react"),{aux:o.jsx(u,{closeTab:function(){return k(d("MWChatStateActions").closeTab(Date.now(),g.tabId))},isItemHovered:p,setItemIsHovered:r,tab:g}),onClick:function(){e(!1);d("LSThreadAttributionStore").setSource((m||(m=d("I64"))).to_string(i.threadKey),"chatheadsOverflow");n(function(a){d("MWChatInteraction").set((m||(m=d("I64"))).to_string(i.threadKey),a)},(l||(l=d("LSIntEnum"))).unwrapIntEnum(i.threadType),"chatheadsOverflow",i.threadKey);t&&d("GroupsCometChatsEngagementLogger").log({action:"tap",community_id:(m||(m=d("I64"))).to_string(i.parentThreadKey),event:"thread_open",source:"chat_bubble_overflow",surface:"chat_bubbles_container",thread_id:m.to_string(i.threadKey)});return k(d("MWChatStateActions").maximizeTab(Date.now(),g.tabId))},onHoverIn:function(){return r(!0)},onHoverOut:function(){return r(!1)},primaryText:o.jsx(s,{thread:i})})}return o.jsx("div",{className:"xc9qbxq x5w4yej",children:o.jsx(c("CometListCellGlimmer.react"),{imageStyle:"none"})})}v.displayName=v.name+" [from "+f.id+"]";function w(a){var b=a.excessHeads,e=a.setParentHoverState;return o.jsx(c("MWXMenu.react"),{size:"full",truncate:!0,withArrow:!0,children:b.map(function(a){var b=a.tabType;return b.type!==d("MWChatStateV2Types").MWChatStateTabType.ComposeTab?o.jsx(v,{descriptor:b.threadKeyDescriptor,setParentHoverState:e,tab:a},String(a.tabId)):c("recoverableViolation")("Compose tab shouldn't be part of excess tabs","messenger_web_product")})})}w.displayName=w.name+" [from "+f.id+"]";function x(a){var b=a.count;a=a.thread;a=c("useMWFacepileGetContactsToShow")(a.threadKey,a.threadType).map(c("getLSMediaContactProfilePictureUrl"));return o.jsx(c("MWChatHeadPicture.react"),{images:a,noDropShadow:!0,noFacepile:!0,children:o.jsx("div",{className:"x6s0dn4 x18l40ae x14yjl9h xudhj91 x18nykt9 xww2gxu x78zum5 xsdox4t xl56j7k x10l6tqk x13vifvy x1useyqa",children:o.jsx(c("MWXText.react"),{color:"white",type:"bodyLink3",children:h._("__JHASH__RM0bWy2OLZa__JHASH__",[h._param("chat count",String(b))])})})})}x.displayName=x.name+" [from "+f.id+"]";var y={glimmer:{borderTopStartRadius:"x14yjl9h",borderTopEndRadius:"xudhj91",borderBottomEndRadius:"x18nykt9",borderBottomStartRadius:"xww2gxu",height:"x5yr21d",width:"xh8yej3",$$css:!0}};function z(a){var b=a.count,e=a.tab;c("useMWV2EnsureThatChatTabExists")(e.threadKey,e.threadType);var g=(j||(j=c("useReStore")))();a=d("ReQLSuspense").useFirst(function(){return d("ReQL").fromTableAscending(g.table("threads")).getKeyRange(e.threadKey)},[g,e.threadKey],f.id+":302");return a!=null?o.jsx(x,{count:b,thread:a}):o.jsx(c("MDSGlimmer.react"),{index:1,xstyle:y.glimmer})}z.displayName=z.name+" [from "+f.id+"]";function a(a){var b=a.excessHeads,e=a.onHoverChange;a=a.style;var f=q(!1),g=f[0],i=f[1];f=b.length;var j=p(null);if(f<=0)return null;var k=b[0].tabType,l;k.type===d("MWChatStateV2Types").MWChatStateTabType.ComposeTab?(c("recoverableViolation")("Compose tab shouldn't be part of excess tabs","messenger_web_product"),l=null):l=o.jsx(z,{count:f,tab:k.threadKeyDescriptor});return o.jsx(d("MWV2ChatHeadButton.react").MWV2ChatHeadButtonContainer,{style:a,children:o.jsx(d("MWV2ChatHeadButton.react").MWV2ChatHeadButton,{ariaLabel:h._("__JHASH__cpB5BWXmx9z__JHASH__",[h._param("chat count",String(f))]),ref:j,children:o.jsxs("div",{onMouseEnter:function(){i(!0),e(!0)},onMouseLeave:function(){i(!1),e(!1)},children:[l,g&&o.jsx(c("CometContextualLayer.react"),{align:"middle",contextRef:j,position:"end",children:o.jsx(w,{excessHeads:b,setParentHoverState:i})})]})})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("GroupsCometRoleManagementStandardRoleDetailViewRootQuery_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="6799900310091634"}),null);